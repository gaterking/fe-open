!function(o,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.feeopen_web=n():o.feeopen_web=n()}(this,function(){return function(o){function n(t){if(e[t])return e[t].exports;var r=e[t]={i:t,l:!1,exports:{}};return o[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var e={};return n.m=o,n.c=e,n.d=function(o,e,t){n.o(o,e)||Object.defineProperty(o,e,{configurable:!1,enumerable:!0,get:t})},n.n=function(o){var e=o&&o.__esModule?function(){return o.default}:function(){return o};return n.d(e,"a",e),e},n.o=function(o,n){return Object.prototype.hasOwnProperty.call(o,n)},n.p="/",n(n.s=6)}([function(o,n){function e(o){o=o.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+o+"=([^&#]*)"),e=n.exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}o.exports.getUrlParameter=e},function(o,n,e){function t(o,n,e,t,r,c){function l(){var o=i("auto");return o=""===o?"":"true"===o||"1"===o,{auto:o}}function u(){return"string"==typeof d.appFlag?""!==d.appFlag&&1!==window.navigator.userAgent.indexOf(d.appFlag):"function"==typeof d.appFlag&&d.appFlag()}function f(){var o=this;window.addEventListener("click",function(n){var e=n.target;e.classList.contains("feeopen")&&o.open(),e.classList.contains("feeopen-download")&&o.download()},!1)}function h(o){var n=l();this.config.autoOpen=n.auto&&"boolean"==typeof n.auto?n.auto:o.autoOpen,this.config.isApp=u(),f.call(this)}var p=s(o,t,n,e),d={isApp:!1,autoOpen:!1,schema:p.schema,universalUrl:p.universalUrl,intent:p.intent,downloadUrl:p.downloadUrl,callback:{onStart:c&&c.onStart?c.onStart:null,onEnd:c&&c.onEnd?c.onEnd:null,onSuccess:c&&c.onSuccess?c.onSuccess:null,onFail:c&&c.onFail?c.onFail:null,onWeChat:c&&c.onWeChat?c.onWeChat:null}};a.call(this,d),h.call(this,d)}function r(o,n,e,r,i,a){return new t(o,n,e,r,i,a)}var i=e(0).getUrlParameter,a=e(2),s=e(5).openFormat;t.prototype=Object.create(a.prototype),t.prototype.constructor=t,o.exports.init=r},function(o,n,e){function t(o,n){function e(o){var n=this;if(document){var e=Date.now(),t=document.createElement("iframe");t.src=o,t.style.display="none",document.body.appendChild(t),setTimeout(function(){document.body.removeChild(t),Date.now()-e<=2500?n.config.callback.onFail&&"function"==typeof n.config.callback.onFail&&n.config.callback.onFail():n.config.callback.onSuccess&&"function"==typeof n.config.callback.onSuccess&&n.config.callback.onSuccess(),n.config.callback.onEnd&&"function"==typeof n.config.callback.onEnd&&n.config.callback.onEnd()},2e3)}}function t(o){location&&location.replace(o)}function i(o,n){a=n?r.getEnv(n):window&&window.navigator?r.getEnv(window.navigator.userAgent):null,this.config=o}var a;this.getDownloadUrl=function(){return Array.isArray(this.config.downloadUrl)?a.isAndroid?this.config.downloadUrl[1]||"":a.isIOS?this.config.downloadUrl[0]||"":"":this.config.downloadUrl},this.download=function(o){(o=o||this.getDownloadUrl())&&(window.location.href=o||this.config.downloadUrl)},this.open=function(o){if(this.config.isApp)return!1;this.config.callback.onStart&&"function"==typeof this.config.callback.onStart&&this.config.callback.onStart();var n=o&&o.universalUrl||this.config.universalUrl,r=o&&o.intent||this.config.intent,i=o&&o.schema||this.config.schema;if(a.isWeChat)return this.config.callback.onWeChat&&"function"==typeof this.config.callback.onWeChat&&this.config.callback.onWeChat(),!1;a.isIOS&&a.osMVer>=9&&n?t.call(this,n):a.isAndroid&&a.isChrome&&r?t.call(this,r):e.call(this,i)},this.start=function(o){(o||!1!==o&&this.config.autoOpen)&&this.open()},i.call(this,o,n)}var r=e(3);t.prototype.config={isApp:!1,autoOpen:!1,schema:"",universalUrl:"",intent:"",downloadUrl:[],callback:{onStart:function(){},onEnd:function(){},onSuccess:function(){},onFail:function(){}}},o.exports=t},function(o,n,e){var t=e(4),r={getEnv:function(o){var n=new t(o);return{isApp:null,isAndroid:"android"===n.os.name,isIOS:"ios"===n.os.name,osVer:n.os.ver,osMVer:n.os.mver,appVer:"0",browser:n.browser.name?n.browser.name:"",browserVer:n.browser.ver?n.browser.ver:"0",browserMVer:n.browser.mver?n.browser.mver:0,isWeChat:!!n.browser.name&&"WeChat"===n.browser.name,isChrome:!!n.browser.name&&"Chrome"===n.browser.name,isMIUI:!!n.browser.name&&"MIUI Browser"===n.browser.name}}};o.exports=r},function(o,n,e){"use strict";function t(o){function n(o){this.ua=o,this.os=this.getOS(o),this.browser=this.getBrowser(o)}this.ua="",this.os=null,this.getOS=function(o){if(!this.os){var n={};a.rgx.call(n,o,i.os),this.os=n,this.os.mver=n.ver?Number.parseInt(n.ver.replace(/^(\d+).*/,"$1")):0}return this.os},this.getBrowser=function(o){if(!this.browser){var n={};a.rgx.call(n,o,i.browser),this.browser=n,this.browser.mver=n.ver?Number.parseInt(n.ver.replace(/^(\d+).*/,"$1")):0}return this.browser},n.call(this,o)}var r="name",i={browser:[[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[r,"UCBrowser"],"ver"],[/(micromessenger)\/([\w\.]+)/i],[[r,"WeChat"],"ver"],[/(QQ)\/([\d\.]+)/i],[r,"ver"],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[r,"ver"],[/xiaomi\/miuibrowser\/([\w\.]+)/i],["ver",[r,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],["ver",[r,"Facebook"]],[/(headlesschrome) ([\w\.]+)/i],["ver",[r,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[r,/(.+)/,"$1 WebView"],"ver"],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[r,/(.+(?:g|us))(.+)/,"$1 $2"],"ver"],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],["ver",[r,"Android Browser"]],[/(chrome)\/v?([\w\.]+)/i],[r,"ver"],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[r,"Chrome"],"ver"],[/fxios\/([\w\.-]+)/i],["ver",[r,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],["ver",[r,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],["ver",r]],os:[[/(android)[\/\s-]?([\w\.]+)*/i],[[r,"android"],["ver"]],[/(iphone|ipad)(?:.*os\s([\w]+)*\slike\smac)/i],[[r,"ios"],["ver",/_/g,"."]]]},a={rgx:function(o,n){for(var e,t,r,i,a,s,c=0;c<n.length&&!a;){var l=n[c],u=n[c+1];for(e=t=0;e<l.length&&!a;)if(a=l[e++].exec(o))for(r=0;r<u.length;r++)s=a[++t],i=u[r],Array.isArray(i)?1===i.length?this[i[0]]=s:2===i.length?"function"==typeof i[1]?this[i[0]]=i[1].call(this,s):this[i[0]]=i[1]:3===i.length?"function"!=typeof i[1]||i[1].exec&&i[1].test?this[i[0]]=s?s.replace(i[1],i[2]):void 0:this[i[0]]=s?i[1].call(this,s,i[2]):void 0:4==i.length&&(this[i[0]]=s?i[3].call(this,s.replace(i[1],i[2])):void 0):this[i]=s||void 0;c+=2}},str:function(o,n){for(var e in n)if("object"==typeof n[e]&&n[e].length>0){for(var t=0;t<n[e].length;t++)if(util.has(n[e][t],o))return e===UNKNOWN?void 0:e}else if(util.has(n[e],o))return e===UNKNOWN?void 0:e;return o}};o.exports=t},function(o,n,e){function t(o,n,e,t){o=o||{},n=n||"",e=e||{},t=t||"";var i=o.value||r("schema"),a={schema:"",universalUrl:"",intent:"",downloadUrl:""};a.schema=o.protocal+encodeURIComponent(i);var s=[];return s.push("intent://"+(e.host?e.host:null)+"/#Intent"),(e.schema||i)&&s.push("scheme="+encodeURIComponent(e.schema?e.schema:i)),e.package&&s.push("package="+e.package),e.action&&s.push("action="+e.action),e.category&&s.push("category="+e.category),e.component&&s.push("component="+e.component),e.fallbackUrl&&s.push("S.browser_fallback_url="+encodeURIComponent(e.fallbackUrl)),s.push("end"),a.intent=s.join(";"),a.downloadUrl=n||"",a.universalUrl=t||"",a}var r=e(0).getUrlParameter;o.exports.openFormat=t},function(o,n,e){function t(o){var n=o.split("://"),e=encodeURIComponent("go?module=index");return"http"===n[0]||"https"===n[0]?e=encodeURIComponent("webview?url=")+encodeURIComponent(n):(n[0],length>0&&(e=encodeURIComponent(n[1]))),e}function r(o){function n(){e=s.init({protocal:"duobaohkg://",value:r},{host:"//duobao",package:"com.henkuaigou.kuaiduobao",schema:r,fallbackUrl:""},"https://twitter.com",i,"duobaohkg",{onStart:function(){},onEnd:function(){},onSuccess:function(){},onFail:function(){},onWeChat:function(){console.log("wechat show download")}}),e.start()}o=o||"";var e,r=t(o),i="https://app.henkuaigou.com/applinks/download.htm";n.call(this)}function i(o){return a||(a=new r(o)),a}var a,s=(e(0).getUrlParameter,e(1));o.exports.init=i}])});