!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.feopen_web=o():e.feopen_web=o()}(this,function(){return function(e){function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}var n={};return o.m=e,o.c=n,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:t})},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},o.p="/0.1.14/",o(o.s=10)}([function(e,o){function n(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=o.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}e.exports.getUrlParameter=n},function(e,o,n){function t(e,o,n,t,i,l){function p(){var e=r("auto");e=""===e?"":"true"===e||"1"===e;var o=r("debug");return o=""===o?"":"true"===o||"1"===o,{auto:e,debug:o}}function u(){return"string"==typeof g.appFlag?""!==g.appFlag&&1!==window.navigator.userAgent.indexOf(g.appFlag):"function"==typeof g.appFlag&&g.appFlag()}function f(){var e=this;window.addEventListener("click",function(o){var n=o.target;n.classList.contains("feopen")&&e.open(),n.classList.contains("feopen-download")&&e.download()},!1)}function d(e){var o=p();this.config.autoOpen=o.auto&&"boolean"==typeof o.auto?o.auto:e.autoOpen,this.config.debug=!(!o.debug||"boolean"!=typeof o.debug)&&o.debug,this.config.isApp=u(),f.call(this)}this.version=c;var h=s(e,t,o,n),g={isApp:!1,autoOpen:!1,schema:h.schema,universalUrl:h.universalUrl,appLink:h.appLink,intent:h.intent,intentWithoutFallback:h.intentWithoutFallback,downloadUrl:h.downloadUrl,callback:{onStart:l&&l.onStart?l.onStart:null,onEnd:l&&l.onEnd?l.onEnd:null,onSuccess:l&&l.onSuccess?l.onSuccess:null,onFail:l&&l.onFail?l.onFail:null,onNotSupport:l&&l.onNotSupport?l.onNotSupport:null}};a.call(this,g),this.config.tlink=h.tlink,d.call(this,g)}function i(e,o,n,i,r,a){return new t(e,o,n,i,r,a)}n(2);var r=n(0).getUrlParameter,a=n(3),s=n(7).openFormat,c=n(8).version;t.prototype=Object.create(a.prototype),t.prototype.open=function(e){!e&&this.config.tlink&&(e={schema:this.config.tlink}),a.prototype.open.apply(this,[e])},t.prototype.openAuto=function(){var e={};this.config.tlink&&(e={schema:this.config.tlink}),a.prototype.openAuto.apply(this,[e])},t.prototype.constructor=t,e.exports.init=i},function(e,o){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,o){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),t=1;t<arguments.length;t++){var i=arguments[t];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},writable:!0,configurable:!0})},function(e,o,n){function t(e){function o(o){e(o>3e3||document.hidden||document.webkitHidden?1:0)}var n,t=+new Date,i=0;n=setInterval(function(){i++;var e=+new Date-t;(i>=40||e>3e3)&&(clearInterval(n),o(e))},50)}function i(e,o){function n(e,o){o?this._currentEnv=r.getEnv(o):window&&window.navigator?this._currentEnv=r.getEnv(window.navigator.userAgent):this._currentEnv=null,this.config=e}this._currentEnv,this._openByIframe=function(e,o){var n=this;if(document){var i=(Date.now(),document.createElement("iframe"));i.src=e,i.style.display="none",document.body.appendChild(i),t(function(e){if(e)n.config.callback.onSuccess&&"function"==typeof n.config.callback.onSuccess&&n.config.callback.onSuccess();else{if(o&&o.onFail&&"function"==typeof o.onFail)return void o.onFail();if(n.config.callback.onFail&&"function"==typeof n.config.callback.onFail)return void n.config.callback.onFail()}n.config.callback.onEnd&&"function"==typeof n.config.callback.onEnd&&n.config.callback.onEnd()}),setTimeout(function(){document.body.removeChild(i)},2e3)}},this._openByLocation=function(e){location&&location.replace(e)},this.getDownloadUrl=function(){return Array.isArray(this.config.downloadUrl)?this._currentEnv.isAndroid?this.config.downloadUrl[1]||"":this._currentEnv.isIOS?this.config.downloadUrl[0]||"":"":this.config.downloadUrl},this.download=function(e){if(this._currentEnv.isWeChat||this._currentEnv.isWeibo)return this.config.callback.onNotSupport&&"function"==typeof this.config.callback.onNotSupport&&this.config.callback.onNotSupport("download",this._currentEnv.browser),!1;(e=e||this.getDownloadUrl())&&(window.location.href=e||this.config.downloadUrl)},this._debugLog=function(e){this.config.debug&&console.log(e)},this.start=function(e){(e||!1!==e&&this.config.autoOpen)&&this.openAuto()},this._wakeupApp=function(e,o,n){if(this._currentEnv.isWeChat||this._currentEnv.isWeibo)return this._debugLog("WeChat"),n&&n.onNotSupport&&"function"==typeof n.onNotSupport?(n.onNotSupport("wakeup",this._currentEnv.browser),!1):!(!this.config.callback.onNotSupport||"function"!=typeof this.config.callback.onNotSupport)&&(this.config.callback.onNotSupport("wakeup",this._currentEnv.browser),!1);var t=!1,i=a.getMethod(this._currentEnv,""!==e.universalUrl,""!==e.appLink,e.intent,o);"u"===i&&(this._debugLog("universal url"),this._openByLocation(e.universalUrl),t=!0),"a"===i&&(this._debugLog("app link"),this._openByLocation(e.appLink),t=!0),"i"===i&&(this._debugLog("intent"),this._openByLocation(e.intent),t=!0),t||(this._debugLog("schema"),"sl"===i?this._openByLocation(e.schema):this._openByIframe(e.schema,n))},n.call(this,e,o)}var r=n(4),a=n(6);i.prototype.config={isApp:!1,autoOpen:!1,schema:"",universalUrl:"",appLink:"",intent:"",downloadUrl:[],callback:{onStart:function(){},onEnd:function(){},onSuccess:function(){},onFail:function(){}},debug:!1},i.prototype.open=function(e){if(this.config.isApp)return!1;this.config.callback.onStart&&"function"==typeof this.config.callback.onStart&&this.config.callback.onStart();var o=e&&e.universalUrl||this.config.universalUrl,n=e&&e.appLink||this.config.appLink,t=e&&e.intent||this.config.intent,i=e&&e.schema||this.config.schema;this._debugLog(o),this._debugLog(n),this._debugLog(t),this._debugLog(i),this._wakeupApp({universalUrl:o,appLink:n,intent:t,schema:i},!1)},i.prototype.openAuto=function(e){if(this.config.isApp)return!1;this.config.callback.onStart&&"function"==typeof this.config.callback.onStart&&this.config.callback.onStart(),this._wakeupApp({universalUrl:"",appLink:"",intent:e&&e.intent||this.config.intentWithoutFallback,schema:e&&e.schema||this.config.schema},!0,{onFail:function(){},onNotSupport:function(e){}})},e.exports=i},function(e,o,n){var t=n(5),i={getEnv:function(e){var o=new t(e);return{isApp:null,isAndroid:"android"===o.os.name,isIOS:"ios"===o.os.name,osVer:o.os.ver,osMVer:o.os.mver,appVer:"0",browser:o.browser.name?o.browser.name:"",browserVer:o.browser.ver?o.browser.ver:"0",browserMVer:o.browser.mver?o.browser.mver:0,isWeChat:!!o.browser.name&&"WeChat"===o.browser.name,isChrome:!!o.browser.name&&"Chrome"===o.browser.name,isMIUI:!!o.browser.name&&"MIUI Browser"===o.browser.name,isWeibo:!!o.browser.name&&"Weibo"===o.browser.name,isUC:!!o.browser.name&&"UCBrowser"===o.browser.name,isQQ:!!o.browser.name&&"QQBrowser"===o.browser.name,isLieBao:!!o.browser.name&&"LieBaoFast"===o.browser.name,isSamsung:!!o.browser.name&&"Samsung Browser"===o.browser.name}}};e.exports=i},function(e,o,n){"use strict";function t(e){function o(e){this.ua=e,this.os=this.getOS(e),this.browser=this.getBrowser(e)}this.ua="",this.os=null,this.getOS=function(e){if(!this.os){var o={};a.rgx.call(o,e,r.os),this.os=o,this.os.mver=o.ver?Number.parseInt(o.ver.replace(/^(\d+).*/,"$1")):0}return this.os},this.getBrowser=function(e){if(!this.browser){var o={};a.rgx.call(o,e,r.browser),this.browser=o,this.browser.mver=o.ver?Number.parseInt(o.ver.replace(/^(\d+).*/,"$1")):0}return this.browser},o.call(this,e)}var i="name",r={browser:[[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[i,"UCBrowser"],"ver"],[/(weibo)__([\d\.]+)/i],[[i,"Weibo"],"ver"],[/(micromessenger)\/([\w\.]+)/i],[[i,"WeChat"],"ver"],[/(QQ)\/([\d\.]+)/i],[i,"ver"],[/m?(qqbrowser|liebaofast|EUI Browser|OppoBrowser)[\/\s]?([\w\.]+)/i],[i,"ver"],[/xiaomi\/miuibrowser\/([\w\.]+)/i],["ver",[i,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],["ver",[i,"Facebook"]],[/(headlesschrome) ([\w\.]+)/i],["ver",[i,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[i,/(.+)/,"$1 WebView"],"ver"],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[i,/(.+(?:g|us))(.+)/,"$1 $2"],"ver"],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],["ver",[i,"Android Browser"]],[/(chrome)\/v?([\w\.]+)/i],[i,"ver"],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[i,"Chrome"],"ver"],[/fxios\/([\w\.-]+)/i],["ver",[i,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],["ver",[i,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],["ver",i]],os:[[/(android)[\/\s-]?([\w\.]+)*/i],[[i,"android"],["ver"]],[/(iphone|ipad)(?:.*os\s([\w]+)*\slike\smac)/i],[[i,"ios"],["ver",/_/g,"."]]]},a={rgx:function(e,o){for(var n,t,i,r,a,s,c=0;c<o.length&&!a;){var l=o[c],p=o[c+1];for(n=t=0;n<l.length&&!a;)if(a=l[n++].exec(e))for(i=0;i<p.length;i++)s=a[++t],r=p[i],Array.isArray(r)?1===r.length?this[r[0]]=s:2===r.length?"function"==typeof r[1]?this[r[0]]=r[1].call(this,s):this[r[0]]=r[1]:3===r.length?"function"!=typeof r[1]||r[1].exec&&r[1].test?this[r[0]]=s?s.replace(r[1],r[2]):void 0:this[r[0]]=s?r[1].call(this,s,r[2]):void 0:4==r.length&&(this[r[0]]=s?r[3].call(this,s.replace(r[1],r[2])):void 0):this[r]=s||void 0;c+=2}},str:function(e,o){for(var n in o)if("object"==typeof o[n]&&o[n].length>0){for(var t=0;t<o[n].length;t++)if(util.has(o[n][t],e))return n===UNKNOWN?void 0:n}else if(util.has(o[n],e))return n===UNKNOWN?void 0:n;return e}};e.exports=t},function(e,o){function n(e,o,n,t,i){var r=i?"sl":"";return!i&&e.isIOS&&e.osMVer>=9&&o?r="u":!i&&e.isAndroid&&e.osMVer>=6&&n?r="a":e.isAndroid&&t&&e.isChrome&&(r="i"),r}e.exports.getMethod=n},function(e,o,n){function t(e){var o=["",""];return e&&Array.isArray(e)&&(o[0]=e[0]?e[0]:"",o[1]=e[1]?e[1]:""),e&&"string"==typeof e&&(o=[e,e]),o}function i(e,o,n,i){e=e||{},o=o||"",i=i||"";var a=e.value||r("schema"),s={tlink:"",schema:"",universalUrl:"",appLink:"",intent:"",downloadUrl:""};s.tlink="undefined"!=typeof feopenConfig&&feopenConfig.tlink?feopenConfig.tlink:"",s.schema=e.protocal+encodeURIComponent(a);var c=[];n&&(c.push("intent://"+(n.host?n.host:null)+"/#Intent"),(n.schema||a)&&c.push("scheme="+(n.schema?n.schema:a)),n.package&&c.push("package="+n.package),n.action&&c.push("action="+n.action),n.category&&c.push("category="+n.category),n.component&&c.push("component="+n.component),n.fallbackUrl&&c.push("S.browser_fallback_url="+encodeURIComponent(n.fallbackUrl)),c.push("end"),s.intent=c.join(";"),s.intentWithoutFallback=s.intent.replace(/\;S\.browser_fallback_url=((?!\;).)*/,"")),s.downloadUrl=o||"";var l=t(i);return s.universalUrl=l&&l[0]?l[0]:"",s.appLink=l&&l[1]?l[1]:"",s}var r=n(0).getUrlParameter;e.exports.openFormat=i},function(e,o){e.exports={name:"fe-open",version:"0.1.14",description:"H5唤醒原生APP",main:"src/index.js",scripts:{"test:debug":"node --inspect-brk ./node_modules/jest/bin/jest --config=./config/jest.config.js --runInBand",test:"node ./node_modules/jest/bin/jest --config=./config/jest.config.js",build:"webpack --config config/webpack.prod.config.js && npm run doc",dev:"webpack-dev-server --config config/webpack.dev.config.js",doc:"jsdoc2md --no-cache -c config/jsdoc.conf.json >> docs/api.md","build:publish":"npm run build && npm publish"},author:"gzliruixi",license:"ISC",devDependencies:{"clean-webpack-plugin":"^0.1.16","img-loader":"^2.0.0",jest:"^20.0.4","jsdoc-to-markdown":"^3.0.0","url-loader":"^0.5.9",webpack:"^3.5.5","webpack-dev-server":"^2.7.1","webpack-merge":"^4.1.0"}}},,function(e,o,n){function t(e,o){function n(){i=a.init({protocal:t.protocal+"://",value:t.schema},{host:"tkrkj",package:"com.iwincaipiao"+(o?".alpha":""),schema:"oldbirdlottery://"+t.schema,fallbackUrl:t.fallbackUrl||(Array.isArray(t.donwloadUrl)?t.donwloadUrl[2]||t.donwloadUrl[1]:t.donwloadUrl)},t.deepLink,t.downloadUrl,t.appFlag,{onNotSupport:t.onNotSupport,onFail:t.onFail}),i.start(t.autoOpen)}var t=Object.assign({protocal:"oldbirdlottery",schema:"",deepLink:["https://a.iwincaipiao.com/h1"],downloadUrl:"https://a.iwincaipiao.com/h1",fallbackUrl:"https://a.iwincaipiao.com/h1",appFlag:"ycp",autoOpen:null},e);t.onNotSupport=function(e,o){var n=document.getElementById("feopen-tmpl-wakeup"),t=document.getElementById("feopen-tmpl-download");switch(e){case"wakeup":case"download":if(n)s.open("#feopen-tmpl-wakeup");else if(t)s.open("#feopen-tmpl-download");else{var i="WeChat"===o?l:"Weibo"===o?f:"";s.open('<div class="feopen-close">'+i==""?"":'<img src="'+i+'" style="width:100%;display: block;" /><img src="'+p+'" style="width:100%;display: block;"/><img src="'+u+'" style="width:100%;display: block;"/></div>')}}},t.onFail=function(){i.download()};var i;n.call(this)}function i(e,o){return r||(r=new t(e,o)),r}var r,a=(n(0).getUrlParameter,n(1)),s=n(11),c="https://mimg.iwincaipiao.com/images/ld/",l=c+"popup_1_weixin.jpg",p=c+"popup_2.jpg",u=c+"popup_3.jpg",f=c+"popup_1_weibo.jpg";e.exports.init=i},function(e,o){function n(){r()}function t(e){for(var o=document.getElementsByClassName("feopen-close"),t=0,i=o.length;t<i;t++)e?o[t].removeEventListener("click",n,!1):o[t].addEventListener("click",n,!1)}function i(e){var o=document.createElement("div");o.className="feopen_mask",o.style.position="fixed",o.style.opacity=".6",o.style.background="#f6f6f6",o.style.width="100%",o.style.top="0",o.style.bottom="0",o.style.left="0",o.style.zIndex="1000";var n=document.createElement("div");n.className="feopen_content",n.style.position="absolute",n.style.zIndex="1001",n.style.top="0",n.style.left="0";var i='<button class="feopen-close">Close</button>';e&&(i=/^#/.test(e)?document.querySelector(e).innerHTML:e),n.innerHTML=i,document.body.appendChild(o),document.body.appendChild(n),t()}function r(){t(!0);for(var e=document.getElementsByClassName("feopen_content"),o=0,n=e.length;o<n;o++)document.body.removeChild(e[o]);for(var i=document.getElementsByClassName("feopen_mask"),o=0,n=i.length;o<n;o++)document.body.removeChild(i[o])}e.exports.open=i,e.exports.close=r}])});