!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.feopen_web=o():e.feopen_web=o()}(this,function(){return function(e){function o(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n={};return o.m=e,o.c=n,o.d=function(e,n,r){o.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},o.p="/",o(o.s=1)}([function(e,o){function n(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=o.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}e.exports.getUrlParameter=n},function(e,o,n){function r(e,o,n,r,t,c){function l(){var e=i("auto");e=""===e?"":"true"===e||"1"===e;var o=i("debug");return o=""===o?"":"true"===o||"1"===o,{auto:e,debug:o}}function u(){return"string"==typeof d.appFlag?""!==d.appFlag&&1!==window.navigator.userAgent.indexOf(d.appFlag):"function"==typeof d.appFlag&&d.appFlag()}function f(){var e=this;window.addEventListener("click",function(o){var n=o.target;n.classList.contains("feopen")&&e.open(),n.classList.contains("feopen-download")&&e.download()},!1)}function h(e){var o=l();this.config.autoOpen=o.auto&&"boolean"==typeof o.auto?o.auto:e.autoOpen,this.config.debug=!(!o.debug||"boolean"!=typeof o.debug)&&o.debug,this.config.isApp=u(),f.call(this)}this.version="0.1.4";var p=s(e,r,o,n),d={isApp:!1,autoOpen:!1,schema:p.schema,universalUrl:p.universalUrl,appLink:p.appLink,intent:p.intent,downloadUrl:p.downloadUrl,callback:{onStart:c&&c.onStart?c.onStart:null,onEnd:c&&c.onEnd?c.onEnd:null,onSuccess:c&&c.onSuccess?c.onSuccess:null,onFail:c&&c.onFail?c.onFail:null,onWeChat:c&&c.onWeChat?c.onWeChat:null}};a.call(this,d),h.call(this,d)}function t(e,o,n,t,i,a){return new r(e,o,n,t,i,a)}var i=n(0).getUrlParameter,a=n(2),s=n(6).openFormat;r.prototype=Object.create(a.prototype),r.prototype.constructor=r,e.exports.init=t},function(e,o,n){function r(e){function o(o){e(o>3e3||document.hidden||document.webkitHidden?1:0)}var n,r=+new Date,t=0;n=setInterval(function(){t++;var e=+new Date-r;(t>=100||e>3e3)&&(clearInterval(n),o(e))},20)}function t(e,o){function n(e){var o=this;if(document){var n=(Date.now(),document.createElement("iframe"));n.src=e,n.style.display="none",document.body.appendChild(n),r(function(e){e?o.config.callback.onSuccess&&"function"==typeof o.config.callback.onSuccess&&o.config.callback.onSuccess():o.config.callback.onFail&&"function"==typeof o.config.callback.onFail&&o.config.callback.onFail(),o.config.callback.onEnd&&"function"==typeof o.config.callback.onEnd&&o.config.callback.onEnd()}),setTimeout(function(){document.body.removeChild(n)},2e3)}}function t(e){location&&location.replace(e)}function s(e,o){c=o?i.getEnv(o):window&&window.navigator?i.getEnv(window.navigator.userAgent):null,this.config=e}var c;this.getDownloadUrl=function(){return Array.isArray(this.config.downloadUrl)?c.isAndroid?this.config.downloadUrl[1]||"":c.isIOS?this.config.downloadUrl[0]||"":"":this.config.downloadUrl},this.download=function(e){(e=e||this.getDownloadUrl())&&(window.location.href=e||this.config.downloadUrl)},this._debugLog=function(e){this.config.debug&&console.log(e)},this.open=function(e){if(this.config.isApp)return!1;this.config.callback.onStart&&"function"==typeof this.config.callback.onStart&&this.config.callback.onStart();var o=e&&e.universalUrl||this.config.universalUrl,r=e&&e.appLink||this.config.appLink,i=e&&e.intent||this.config.intent,s=e&&e.schema||this.config.schema;if(this._debugLog(o),this._debugLog(r),this._debugLog(i),this._debugLog(s),c.isWeChat)return this._debugLog("WeChat"),this.config.callback.onWeChat&&"function"==typeof this.config.callback.onWeChat&&this.config.callback.onWeChat(),!1;var l=!1,u=a.getMethod(c,""!==o,""!==r,i);"u"===u&&(this._debugLog("universal url"),t.call(this,o),l=!0),"a"===u&&(this._debugLog("app link"),t.call(this,r),l=!0),"i"===u&&(this._debugLog("intent"),t.call(this,i),l=!0),l||(this._debugLog("schema"),n.call(this,s))},this.start=function(e){(e||!1!==e&&this.config.autoOpen)&&this.open()},s.call(this,e,o)}var i=n(3),a=n(5);t.prototype.config={isApp:!1,autoOpen:!1,schema:"",universalUrl:"",appLink:"",intent:"",downloadUrl:[],callback:{onStart:function(){},onEnd:function(){},onSuccess:function(){},onFail:function(){}},debug:!1},e.exports=t},function(e,o,n){var r=n(4),t={getEnv:function(e){var o=new r(e);return{isApp:null,isAndroid:"android"===o.os.name,isIOS:"ios"===o.os.name,osVer:o.os.ver,osMVer:o.os.mver,appVer:"0",browser:o.browser.name?o.browser.name:"",browserVer:o.browser.ver?o.browser.ver:"0",browserMVer:o.browser.mver?o.browser.mver:0,isWeChat:!!o.browser.name&&"WeChat"===o.browser.name,isChrome:!!o.browser.name&&"Chrome"===o.browser.name,isMIUI:!!o.browser.name&&"MIUI Browser"===o.browser.name,isWeibo:!!o.browser.name&&"Weibo"===o.browser.name,isUC:!!o.browser.name&&"UCBrowser"===o.browser.name,isQQ:!!o.browser.name&&"QQBrowser"===o.browser.name,isLieBao:!!o.browser.name&&"LieBaoFast"===o.browser.name}}};e.exports=t},function(e,o,n){"use strict";function r(e){function o(e){this.ua=e,this.os=this.getOS(e),this.browser=this.getBrowser(e)}this.ua="",this.os=null,this.getOS=function(e){if(!this.os){var o={};a.rgx.call(o,e,i.os),this.os=o,this.os.mver=o.ver?Number.parseInt(o.ver.replace(/^(\d+).*/,"$1")):0}return this.os},this.getBrowser=function(e){if(!this.browser){var o={};a.rgx.call(o,e,i.browser),this.browser=o,this.browser.mver=o.ver?Number.parseInt(o.ver.replace(/^(\d+).*/,"$1")):0}return this.browser},o.call(this,e)}var t="name",i={browser:[[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[t,"UCBrowser"],"ver"],[/(weibo)__([\d\.]+)/i],[[t,"Weibo"],"ver"],[/(micromessenger)\/([\w\.]+)/i],[[t,"WeChat"],"ver"],[/(QQ)\/([\d\.]+)/i],[t,"ver"],[/m?(qqbrowser|liebaofast)[\/\s]?([\w\.]+)/i],[t,"ver"],[/xiaomi\/miuibrowser\/([\w\.]+)/i],["ver",[t,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],["ver",[t,"Facebook"]],[/(headlesschrome) ([\w\.]+)/i],["ver",[t,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[t,/(.+)/,"$1 WebView"],"ver"],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[t,/(.+(?:g|us))(.+)/,"$1 $2"],"ver"],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],["ver",[t,"Android Browser"]],[/(chrome)\/v?([\w\.]+)/i],[t,"ver"],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[t,"Chrome"],"ver"],[/fxios\/([\w\.-]+)/i],["ver",[t,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],["ver",[t,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],["ver",t]],os:[[/(android)[\/\s-]?([\w\.]+)*/i],[[t,"android"],["ver"]],[/(iphone|ipad)(?:.*os\s([\w]+)*\slike\smac)/i],[[t,"ios"],["ver",/_/g,"."]]]},a={rgx:function(e,o){for(var n,r,t,i,a,s,c=0;c<o.length&&!a;){var l=o[c],u=o[c+1];for(n=r=0;n<l.length&&!a;)if(a=l[n++].exec(e))for(t=0;t<u.length;t++)s=a[++r],i=u[t],Array.isArray(i)?1===i.length?this[i[0]]=s:2===i.length?"function"==typeof i[1]?this[i[0]]=i[1].call(this,s):this[i[0]]=i[1]:3===i.length?"function"!=typeof i[1]||i[1].exec&&i[1].test?this[i[0]]=s?s.replace(i[1],i[2]):void 0:this[i[0]]=s?i[1].call(this,s,i[2]):void 0:4==i.length&&(this[i[0]]=s?i[3].call(this,s.replace(i[1],i[2])):void 0):this[i]=s||void 0;c+=2}},str:function(e,o){for(var n in o)if("object"==typeof o[n]&&o[n].length>0){for(var r=0;r<o[n].length;r++)if(util.has(o[n][r],e))return n===UNKNOWN?void 0:n}else if(util.has(o[n],e))return n===UNKNOWN?void 0:n;return e}};e.exports=r},function(e,o){function n(e,o,n,r){var t="";return e.isIOS&&e.osMVer>=9&&o&&(t="u"),e.isAndroid&&e.osMVer>=6&&n&&(t="a"),!e.isAndroid||!r||e.isUC||e.isQQ||e.isLieBao||(t="i"),t}e.exports.getMethod=n},function(e,o,n){function r(e){var o=["",""];return e&&Array.isArray(e)&&(o[0]=e[0]?e[0]:"",o[1]=e[1]?e[1]:""),e&&"string"==typeof e&&(o=[e,e]),o}function t(e,o,n,t){e=e||{},o=o||"",t=t||"";var a=e.value||i("schema"),s={schema:"",universalUrl:"",appLink:"",intent:"",downloadUrl:""};s.schema=e.protocal+encodeURIComponent(a);var c=[];n&&(c.push("intent://"+(n.host?n.host:null)+"/#Intent"),(n.schema||a)&&c.push("scheme="+(n.schema?n.schema:a)),n.package&&c.push("package="+n.package),n.action&&c.push("action="+n.action),n.category&&c.push("category="+n.category),n.component&&c.push("component="+n.component),n.fallbackUrl&&c.push("S.browser_fallback_url="+encodeURIComponent(n.fallbackUrl)),c.push("end"),s.intent=c.join(";")),s.downloadUrl=o||"";var l=r(t);return s.universalUrl=l&&l[0]?l[0]:"",s.appLink=l&&l[1]?l[1]:"",s}var i=n(0).getUrlParameter;e.exports.openFormat=t}])});