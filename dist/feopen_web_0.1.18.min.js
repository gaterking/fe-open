!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.feopen_web=e():n.feopen_web=e()}(this,function(){return function(n){function e(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return n[t].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};return e.m=n,e.c=o,e.d=function(n,o,t){e.o(n,o)||Object.defineProperty(n,o,{configurable:!1,enumerable:!0,get:t})},e.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(o,"a",o),o},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="/0.1.18/",e(e.s=1)}([function(n,e){function o(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+n+"=([^&#]*)"),o=e.exec(location.search);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}function t(n,e,o){var t=new RegExp("([?&])"+e+"=.*?(&|#|$)","i");if(n.match(t))return n.replace(t,"$1"+e+"="+o+"$2");var i="";return-1!==n.indexOf("#")&&(i=n.replace(/.*#/,"#"),n=n.replace(/#.*/,"")),n+(-1!==n.indexOf("?")?"&":"?")+e+"="+o+i}n.exports.getUrlParameter=o,n.exports.updateUrlParameter=t},function(n,e,o){function t(n,e,o,t,i,l){function u(){var n=r("auto");n=""===n?"":"true"===n||"1"===n;var e=r("debug");e=""===e?"":"true"===e||"1"===e;var o=r("o");return o=""===o?"":"true"===o||"1"===o,{auto:n,debug:e,isOpened:o}}function p(){return"string"==typeof g.appFlag?""!==g.appFlag&&1!==window.navigator.userAgent.indexOf(g.appFlag):"function"==typeof g.appFlag&&g.appFlag()}function f(){var n=this;document.body.addEventListener("click",function(e){var o=e.target;o.classList.contains("feopen")&&n.open(),o.classList.contains("feopen-download")&&n.download()},!1)}function h(n){var e=u();this.config.autoOpen=e.auto&&"boolean"==typeof e.auto?e.auto:n.autoOpen,this.config.debug=!(!e.debug||"boolean"!=typeof e.debug)&&e.debug,this.config.isOpened=!(!e.isOpened||"boolean"!=typeof e.isOpened)&&e.isOpened,this.config.isApp=p(),f.call(this)}this.version=c;var d=a(n,t,e,o),g={isApp:!1,autoOpen:!1,schema:d.schema,universalUrl:d.universalUrl,appLink:d.appLink,intent:d.intent,intentWithoutFallback:d.intentWithoutFallback,downloadUrl:d.downloadUrl,callback:{onStart:l&&l.onStart?l.onStart:null,onEnd:l&&l.onEnd?l.onEnd:null,onSuccess:l&&l.onSuccess?l.onSuccess:null,onFail:l&&l.onFail?l.onFail:null,onNotSupport:l&&l.onNotSupport?l.onNotSupport:null}};s.call(this,g),this.config.tlink=d.tlink,h.call(this,g)}function i(n,e,o,i,r,s){return new t(n,e,o,i,r,s)}o(2);var r=o(0).getUrlParameter,s=o(3),a=o(7).openFormat,c=o(8).version;t.prototype=Object.create(s.prototype),t.prototype.open=function(n){!n&&this.config.tlink&&(n={schema:this.config.tlink}),s.prototype.open.apply(this,[n])},t.prototype.openAuto=function(){var n={};this.config.tlink&&(n={schema:this.config.tlink}),s.prototype.openAuto.apply(this,[n])},t.prototype.constructor=t,n.exports.init=i},function(n,e){Array.isArray||(Array.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(n,e){"use strict";if(null==n)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),t=1;t<arguments.length;t++){var i=arguments[t];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(o[r]=i[r])}return o},writable:!0,configurable:!0})},function(n,e,o){function t(n){function e(e){n(e>3e3||document.hidden||document.webkitHidden?1:0)}var o,t=+new Date,i=0;o=setInterval(function(){i++;var n=+new Date-t;(i>=40||n>3e3)&&(clearInterval(o),e(n))},50)}function i(n,e){function o(n,e){e?this._currentEnv=r.getEnv(e):window&&window.navigator?this._currentEnv=r.getEnv(window.navigator.userAgent):this._currentEnv=null,this.config=n}this._currentEnv,this._openByIframe=function(n,e){var o=this;if(document){var i=(Date.now(),document.createElement("iframe"));i.src=n,i.style.display="none",document.body.appendChild(i),t(function(n){if(n)o.config.callback.onSuccess&&"function"==typeof o.config.callback.onSuccess&&o.config.callback.onSuccess();else{if(e&&e.onFail&&"function"==typeof e.onFail)return void e.onFail();if(o.config.callback.onFail&&"function"==typeof o.config.callback.onFail)return void o.config.callback.onFail()}o.config.callback.onEnd&&"function"==typeof o.config.callback.onEnd&&o.config.callback.onEnd()}),setTimeout(function(){document.body.removeChild(i)},2e3)}},this._openByLocation=function(n){location&&location.replace(n)},this.getDownloadUrl=function(){return Array.isArray(this.config.downloadUrl)?this._currentEnv.isAndroid?this.config.downloadUrl[1]||"":this._currentEnv.isIOS?this.config.downloadUrl[0]||"":"":this.config.downloadUrl},this.download=function(n){if(this._currentEnv.isWeChat||this._currentEnv.isWeibo)return this.config.callback.onNotSupport&&"function"==typeof this.config.callback.onNotSupport&&this.config.callback.onNotSupport("download",this._currentEnv.browser),!1;(n=n||this.getDownloadUrl())&&(window.location.href=n||this.config.downloadUrl)},this._debugLog=function(n){this.config.debug&&console.log(n)},this.start=function(n){(n||!1!==n&&this.config.autoOpen)&&this.openAuto()},this._wakeupApp=function(n,e,o){var t=s.getMethod(this._currentEnv,""!==n.universalUrl,""!==n.appLink,n.intent,e);if(this._currentEnv.isWeChat||this._currentEnv.isWeibo)return this._debugLog("WeChat"),o&&o.onNotSupport&&"function"==typeof o.onNotSupport?(o.onNotSupport("wakeup",this._currentEnv.browser),!1):!(!this.config.callback.onNotSupport||"function"!=typeof this.config.callback.onNotSupport)&&(this.config.callback.onNotSupport("wakeup",this._currentEnv.browser),!1);var i=!1;"u"===t&&(this._debugLog("universal url"),this.config.isOpened?this.download():this.config.isOpened=!0,i=!0),"a"===t&&(this._debugLog("app link"),this.config.isOpened?this.download():this.config.isOpened=!0,i=!0),"i"===t&&(this._debugLog("intent"),this._openByLocation(n.intent),i=!0),i||(this._debugLog("schema"),"sl"===t?this._openByLocation(n.schema):this._openByIframe(n.schema,o))},o.call(this,n,e)}var r=o(4),s=o(6);o(0).updateUrlParameter;i.prototype.config={isApp:!1,autoOpen:!1,isOpened:!1,schema:"",universalUrl:"",appLink:"",intent:"",downloadUrl:[],callback:{onStart:function(){},onEnd:function(){},onSuccess:function(){},onFail:function(){}},debug:!1},i.prototype.open=function(n){if(this.config.isApp)return!1;this.config.callback.onStart&&"function"==typeof this.config.callback.onStart&&this.config.callback.onStart();var e=n&&n.universalUrl||this.config.universalUrl,o=n&&n.appLink||this.config.appLink,t=n&&n.intent||this.config.intent,i=n&&n.schema||this.config.schema;this._debugLog(e),this._debugLog(o),this._debugLog(t),this._debugLog(i),this._wakeupApp({universalUrl:e,appLink:o,intent:t,schema:i},!1)},i.prototype.openAuto=function(n){if(this.config.isApp)return!1;this.config.callback.onStart&&"function"==typeof this.config.callback.onStart&&this.config.callback.onStart(),this._wakeupApp({universalUrl:n&&n.universalUrl||this.config.universalUrl,appLink:n&&n.appLink||this.config.appLink,intent:n&&n.intent||this.config.intentWithoutFallback,schema:n&&n.schema||this.config.schema},!0,{onFail:function(){},onNotSupport:function(n){}})},n.exports=i},function(n,e,o){var t=o(5),i={getEnv:function(n){var e=new t(n);return{isApp:null,isAndroid:"android"===e.os.name,isIOS:"ios"===e.os.name,osVer:e.os.ver,osMVer:e.os.mver,appVer:"0",browser:e.browser.name?e.browser.name:"",browserVer:e.browser.ver?e.browser.ver:"0",browserMVer:e.browser.mver?e.browser.mver:0,isWeChat:!!e.browser.name&&"WeChat"===e.browser.name,isChrome:!!e.browser.name&&"Chrome"===e.browser.name,isMIUI:!!e.browser.name&&"MIUI Browser"===e.browser.name,isWeibo:!!e.browser.name&&"Weibo"===e.browser.name,isUC:!!e.browser.name&&"UCBrowser"===e.browser.name,isQQ:!!e.browser.name&&"QQBrowser"===e.browser.name,isLieBao:!!e.browser.name&&"LieBaoFast"===e.browser.name,isSamsung:!!e.browser.name&&"Samsung Browser"===e.browser.name}}};n.exports=i},function(n,e,o){"use strict";function t(n){function e(n){this.ua=n,this.os=this.getOS(n),this.browser=this.getBrowser(n)}this.ua="",this.os=null,this.getOS=function(n){if(!this.os){var e={};s.rgx.call(e,n,r.os),this.os=e,this.os.mver=e.ver?parseInt(e.ver.replace(/^(\d+).*/,"$1")):0}return this.os},this.getBrowser=function(n){if(!this.browser){var e={};s.rgx.call(e,n,r.browser),this.browser=e,this.browser.mver=e.ver?parseInt(e.ver.replace(/^(\d+).*/,"$1")):0}return this.browser},e.call(this,n)}var i="name",r={browser:[[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[i,"UCBrowser"],"ver"],[/(weibo)__([\d\.]+)/i],[[i,"Weibo"],"ver"],[/(micromessenger)\/([\w\.]+)/i],[[i,"WeChat"],"ver"],[/(QQ)\/([\d\.]+)/i],[i,"ver"],[/m?(qqbrowser|liebaofast|EUI Browser|OppoBrowser)[\/\s]?([\w\.]+)/i],[i,"ver"],[/xiaomi\/miuibrowser\/([\w\.]+)/i],["ver",[i,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],["ver",[i,"Facebook"]],[/(headlesschrome) ([\w\.]+)/i],["ver",[i,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[i,/(.+)/,"$1 WebView"],"ver"],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[i,/(.+(?:g|us))(.+)/,"$1 $2"],"ver"],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],["ver",[i,"Android Browser"]],[/(chrome)\/v?([\w\.]+)/i],[i,"ver"],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[i,"Chrome"],"ver"],[/fxios\/([\w\.-]+)/i],["ver",[i,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],["ver",[i,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],["ver",i]],os:[[/(android)[\/\s-]?([\w\.]+)*/i],[[i,"android"],["ver"]],[/(iphone|ipad)(?:.*os\s([\w]+)*\slike\smac)/i],[[i,"ios"],["ver",/_/g,"."]]]},s={rgx:function(n,e){for(var o,t,i,r,s,a,c=0;c<e.length&&!s;){var l=e[c],u=e[c+1];for(o=t=0;o<l.length&&!s;)if(s=l[o++].exec(n))for(i=0;i<u.length;i++)a=s[++t],r=u[i],Array.isArray(r)?1===r.length?this[r[0]]=a:2===r.length?"function"==typeof r[1]?this[r[0]]=r[1].call(this,a):this[r[0]]=r[1]:3===r.length?"function"!=typeof r[1]||r[1].exec&&r[1].test?this[r[0]]=a?a.replace(r[1],r[2]):void 0:this[r[0]]=a?r[1].call(this,a,r[2]):void 0:4==r.length&&(this[r[0]]=a?r[3].call(this,a.replace(r[1],r[2])):void 0):this[r]=a||void 0;c+=2}},str:function(n,e){for(var o in e)if("object"==typeof e[o]&&e[o].length>0){for(var t=0;t<e[o].length;t++)if(util.has(e[o][t],n))return o===UNKNOWN?void 0:o}else if(util.has(e[o],n))return o===UNKNOWN?void 0:o;return n}};n.exports=t},function(n,e){function o(n,e,o,t,i){var r=i?"sl":"";return n.isIOS&&n.osMVer>=9&&e?r="u":!i&&n.isAndroid&&n.osMVer>=6&&o?r="a":n.isAndroid&&t&&n.isChrome&&(r="i"),r}n.exports.getMethod=o},function(n,e,o){function t(n){var e=["",""];return n&&Array.isArray(n)&&(e[0]=n[0]?n[0]:"",e[1]=n[1]?n[1]:""),n&&"string"==typeof n&&(e=[n,n]),e}function i(n,e,o,i){n=n||{},e=e||"",i=i||"";var s=n.value||r("schema"),a={tlink:"",schema:"",universalUrl:"",appLink:"",intent:"",downloadUrl:""};a.tlink="undefined"!=typeof feopenConfig&&feopenConfig.tlink?feopenConfig.tlink:"",a.schema=n.protocal+encodeURIComponent(s);var c=[];o&&(c.push("intent://"+(o.host?o.host:null)+"/#Intent"),(o.schema||s)&&c.push("scheme="+(o.schema?o.schema:s)),o.package&&c.push("package="+o.package),o.action&&c.push("action="+o.action),o.category&&c.push("category="+o.category),o.component&&c.push("component="+o.component),o.fallbackUrl&&c.push("S.browser_fallback_url="+encodeURIComponent(o.fallbackUrl)),c.push("end"),a.intent=c.join(";"),a.intentWithoutFallback=a.intent.replace(/\;S\.browser_fallback_url=((?!\;).)*/,"")),a.downloadUrl=e||"";var l=t(i);return a.universalUrl=l&&l[0]?l[0]:"",a.appLink=l&&l[1]?l[1]:"",a}var r=o(0).getUrlParameter;n.exports.openFormat=i},function(n,e){n.exports={name:"fe-open",version:"0.1.18",description:"H5唤醒原生APP",main:"src/index.js",scripts:{"test:debug":"node --inspect-brk ./node_modules/jest/bin/jest --config=./config/jest.config.js --runInBand",test:"node ./node_modules/jest/bin/jest --config=./config/jest.config.js",build:"webpack --config config/webpack.prod.config.js && npm run doc",dev:"webpack-dev-server --config config/webpack.dev.config.js",doc:"jsdoc2md --no-cache -c config/jsdoc.conf.json >> docs/api.md","build:publish":"npm run build && npm publish"},author:"gzliruixi",license:"ISC",devDependencies:{"clean-webpack-plugin":"^0.1.16","img-loader":"^2.0.0",jest:"^20.0.4","jsdoc-to-markdown":"^3.0.0","url-loader":"^0.5.9",webpack:"^3.5.5","webpack-dev-server":"^2.7.1","webpack-merge":"^4.1.0"}}}])});